<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Bootstrap Columns Layout</title>
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">  
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <style>
        #dropdownMenuButtonTransactions.dropdown-toggle::after {
            display: none;
            }
    </style>

    <style>
        #dropdownMenuButtonRegular.dropdown-toggle::after {
            display: none;
            }
    </style>


</head>
<body style="padding-bottom: 1000px;">
    
    <nav class="navbar navbar-expand-lg navbar-light bg-light" style="border-bottom: 1px solid black;">
        <div class="container d-flex justify-content-between">
            <a class="navbar-brand" href="#">My App</a>
            {%if page == "home"%}
                <div class="d-flex">
                    
                </div>
            {%elif page == "overview"%}
                <div class="d-flex">
                    <ul class="navbar-nav me-auto">
                        <li class="nav-item">
                            <a class="nav-link active" href="{{url_for('views.overview')}}">Overview</a>
                        </li>
                        
                        <li class="nav-item">
                            <a class="nav-link" href="{{url_for('views.transactions')}}">Transactions</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="{{url_for('views.financialgoals')}}">Financial Goals</a>
                        </li>
                    </ul>
                </div>
            {%elif page == "profile"%}
                <div class="d-flex">
                    <ul class="navbar-nav me-auto">
                        <li class="nav-item">
                            <a class="nav-link" href="{{url_for('views.overview')}}">Overview</a>
                        </li>
                        
                        <li class="nav-item">
                            <a class="nav-link" href="{{url_for('views.transactions')}}">Transactions</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="{{url_for('views.financialgoals')}}">Financial Goals</a>
                        </li>
                    </ul>
                </div>
            {%elif page == "transactions"%}
                <div class="d-flex">
                    <ul class="navbar-nav me-auto">
                        <li class="nav-item">
                            <a class="nav-link" href="{{url_for('views.overview')}}">Overview</a>
                        </li>
                        
                        <li class="nav-item">
                            <a class="nav-link active" href="{{url_for('views.transactions')}}">Transactions</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="{{url_for('views.financialgoals')}}">Financial Goals</a>
                        </li>
                    </ul>
                </div>
            {%elif page == "financialgoals"%}
                <div class="d-flex">
                    <ul class="navbar-nav me-auto">
                        <li class="nav-item">
                            <a class="nav-link" href="{{url_for('views.overview')}}">Overview</a>
                        </li>
                        
                        <li class="nav-item">
                            <a class="nav-link" href="{{url_for('views.transactions')}}">Transactions</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link active" href="{{url_for('views.financialgoals')}}">Financial Goals</a>
                        </li>
                    </ul>
                </div>
            {%elif page == "statistics"%}
            <div class="d-flex">
                <ul class="navbar-nav me-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="{{url_for('views.overview')}}">Overview</a>
                    </li>
                    
                    <li class="nav-item">
                        <a class="nav-link" href="{{url_for('views.transactions')}}">Transactions</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link " href="{{url_for('views.financialgoals')}}">Financial Goals</a>
                    </li>
                </ul>
            </div>
            {%endif%}

            {%if page == "home"%}
            <div class="d-flex">
                <a class="nav-link btn me-2 ms-2 " href="{{ url_for('auth.login') }}">Login</a>
                <a class="nav-link btn me-2 ms-2" href="{{ url_for('auth.sign_up') }}">Sign Up</a>
            </div>
            {%else%}
            <div class="d-flex">
                <div class="dropdown">
                    <a class="nav-link dropdown-toggle text-center" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false" onclick="changeImage(); changeColor(); updateDatabase()">
                        
                        {%if last_notifs%}
                            <i id="notification" class="bi-bell-fill" style="color:red"></i>
                        {%else%}
                            <i id="notification" class="bi-bell"></i>
                        {%endif%}
                        
                    </a> 
                    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="notificationDropdown" style="overflow:auto; max-height: 500px; width: 400px;" >
                        <li><a class="dropdown-item" href="#">Notification 1</a></li>
                        <li><a class="dropdown-item" href="#">Notification 2</a></li>
                        <li><a class="dropdown-item" href="#">Notification 3</a></li>
                        <li><a class="dropdown-item" href="#">Notification 1</a></li>
                        <li><a class="dropdown-item" href="#">Notification 2</a></li>
                        <li><a class="dropdown-item" href="#">Notification 3</a></li>
                        <li><a class="dropdown-item" href="#">Notification 1</a></li>
                        <li><a class="dropdown-item" href="#">Notification 2</a></li>
                        <li><a class="dropdown-item" href="#">Notification 3</a></li>
                        <li><a class="dropdown-item" href="#">Notification 1</a></li>
                        <li><a class="dropdown-item" href="#">Notification 2</a></li>
                        <li><a class="dropdown-item" href="#">Notification 3</a></li>
                    </ul>
                </div>
                {%if page == "profile"%}
                <a class="nav-link active btn-outline-secondary me-2 ms-2 " href="{{url_for('views.profile')}}">Profile</a>
                <a class="nav-link btn-outline-secondary me-2 ms-2 " href="{{url_for('auth.logout')}}">Logout</a>

                {%else%}
                <a class="nav-link btn-outline-secondary me-2 ms-2 " href="{{url_for('views.profile')}}">Profile</a>
                <a class="nav-link btn-outline-secondary me-2 ms-2 " href="{{url_for('auth.logout')}}">Logout</a>
                {%endif%}
            </div>
            {%endif%}
        </div>
    </nav>
  

   
    {% with messages = get_flashed_messages(with_categories=true) %} {% if
        messages %} {% for category, message in messages %} {% if category ==
        'error' %}
        <div class="alert alert-danger alter-dismissable fade show" role="alert">
          {{ message }}
          <button type="button" class="close btn btn-outline-danger" data-dismiss="alert" style="background-color:rgb(248, 215, 218);">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        {% else %}
        <div class="alert alert-success alter-dismissable fade show" role="alert">
          {{ message }}
          <button type="button" class="close btn btn-outline-success" data-dismiss="alert" style="background-color:rgb(248, 215, 218);">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        {% endif %} {% endfor %} {% endif %} {% endwith %}

    
    
    
    
    <div class="container-fluid">
        <div class="row vh-100">
            
            <div class="col-1 border-end border-grey"></div>
            
            <div class="col-10 border-end border-grey">
                {% block content %}
                
                

                {% endblock %}  
               
            </div>
            

              
            <div class="col-1 border-end border-black"></div>
        </div>
    </div>
    </div>

    <script>
        function changeColor() {
            var notif_icon = document.getElementById("notification");
            var notif_icon_style = window.getComputedStyle(notif_icon).getPropertyValue("color");

            if (notif_icon_style === "rgb(255, 0, 0)") {
                notif_icon.style.color = "black";
            } else {
            }
        }

        function changeImage()
        {
            var notif_icon = document.getElementById("notification");
            notif_icon.classList.toggle("bi-bell-fill");
            notif_icon.classList.toggle("bi-bell");
        }
    </script>

    <script>
        function updateDatabase() {
            // Define the data you want to send to the Flask route
            const data = "old"

            // Make an AJAX request to the Flask route
            $.ajax({
                url: "/update_notif_state",
                type: "POST",
                contentType: "application/json",
                data: JSON.stringify(data),
                success: function(response) {
                    console.log('Request successful.'); 
                },
                error: function(error) {
                    console.log(error);
                    
                }
            });
        }
    </script>


    
  <!-- Bootstrap Bundle with Popper -->
  <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
  <script src="{{url_for('static',filename='apexcharts.min.js')}}"></script>

  </html>
